<html>
<head>
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
 
<link href="../../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css">
<!-- END GLOBAL MANDATORY STYLES -->
<!-- BEGIN PAGE LEVEL STYLES -->
<link href="../../assets/admin/pages/css/about-us.css" rel="stylesheet" type="text/css"/>
<!-- END PAGE LEVEL STYLES -->
<!-- BEGIN THEME STYLES -->

<link href="../../assets/global/css/components-rounded.css" id="style_components" rel="stylesheet" type="text/css">
<link href="../../assets/global/css/plugins.css" rel="stylesheet" type="text/css">
<link href="../../assets/admin/layout3/css/layout.css" rel="stylesheet" type="text/css">
<link href="../../assets/admin/layout3/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color">
<link href="../../assets/admin/layout3/css/custom.css" rel="stylesheet" type="text/css">

 
<!--[if lt IE 9]>
<script src="../../assets/global/plugins/respond.min.js"></script>
<script src="../../assets/global/plugins/excanvas.min.js"></script> 
<![endif]-->
<script src="../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="../../assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>


</head>
<style>
textarea {
    max-width: 100%;
}

tbody tr td {
    height: 50px !important;
    vertical-align: middle !important;
}

thead tr th {
    height: 50px !important;
    vertical-align: middle !important;
    background: #F6F6F6;
}

.radio {
    margin: 0 !important;
}

input[type="radio"] {
    position: inherit !important;
    margin: 0 !important;
}
</style>
<title>Commande Bison en ligne</title>
<body>
<!-- BEGIN HEADER -->
 <div class="page-header">
    <!-- BEGIN HEADER TOP -->
    <div class="page-header-top">
        <div class="container">
            <div class="container-fluid">
                <!-- BEGIN LOGO -->
                <div class="page-logo">
                         <img style="margin-top: 19px;" src="../../assets/admin/layout3/img/logo_erp.png" alt="logo" class="logo-default">
                </div>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
               
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN TOP NAVIGATION MENU -->
                
                <!-- END TOP NAVIGATION MENU -->
            </div>


        </div>
    </div>
    <!-- END HEADER TOP -->
    <!-- BEGIN HEADER MENU -->
<div class="page-header-menu" style="display: block;">
    <div class="container">
  
        <!-- BEGIN MEGA MENU -->
        <!-- DOC: Apply "hor-menu-light" class after the "hor-menu" class below to have a horizontal menu with white background -->
        <!-- DOC: Remove data-hover="dropdown" and data-close-others="true" attributes below to disable the dropdown opening on mouse hover -->
         <!--   <div class="hor-menu ">
        <ul class="nav navbar-nav">
                <li>
                    <a href="index.php">Tableau de bord</a>
                </li>

                <li class="menu-dropdown classic-menu-dropdown">
                    <a data-hover="megamenu-dropdown" data-close-others="true" data-toggle="dropdown" href="javascript:;" class="hover-initialized">
                        Clients <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu pull-left">


                        <li>
                            <a href="index.php?module=clients&amp;action=add">
                                <i class="icon-pencil"></i>
                                Ajouter un client </a>
                        </li>
                        <li>
                            <a href="index.php?module=clients">
                                <i class="icon-list"></i>
                                Liste des clients </a>
                        </li>

                    </ul>
                </li>
                <li class="menu-dropdown classic-menu-dropdown">
                    <a data-hover="megamenu-dropdown" data-close-others="true" data-toggle="dropdown" href="javascript:;" class="hover-initialized">
                        Liste des Packs <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu pull-left">


                        <li>
                            <a href="index.php?module=packs&amp;action=add">
                                <i class="icon-pencil"></i>
                                Ajouter un pack </a>
                        </li>
                        <li>
                            <a href="index.php?module=packs">
                                <i class="icon-list"></i>
                                Liste des Packs </a>
                        </li>

                    </ul>
                </li>
                <li>
                    <a href="index.php?module=updates">Mise Ã  jour</a>
                </li>

            </ul>
        </div>-->
        <!-- END MEGA MENU -->
        <br>
       
    </div>
</div>



<!-- END HEADER MENU -->
 

</div>
<!-- END HEADER -->    <!-- BEGIN PAGE CONTAINER -->
<div class="page-container">
    <!-- BEGIN PAGE CONTENT -->
    <div class="page-content">
        <div class="container">

            

<!-- BEGIN PAGE BREADCRUMB -->
 
<!--<div style="float:right;">
    <a href="index.php?module=clients&amp;action=add" class="btn btn-sm green" style="margin: 14px 22px;"><i class="fa fa-plus"></i> Nouveau client </a>
</div>-->
<!-- END PAGE BREADCRUMB -->
<!-- BEGIN PAGE CONTENT INNER -->
<div class="portlet light">
<!--
    <div class="portlet-title">
        <div class="caption">
            <i class="fa fa-cogs font-green-sharp"></i>
            <span class="caption-subject font-green-sharp bold uppercase">Liste des clients</span>
        </div>

    </div>
     -->
    <div class="portlet-body">
        <div class="row margin-bottom-30">
            <div class="col-md-12">
                <div class="table-responsive">
  
<div class="row">
<div class="col-xs-2 col-md-2">
</div>
    <div class="col-xs-6 col-md-6">    
         <table class="table table-bordered table-condensed no-margin" style="width: 400px;margin: 0 auto;">
            <thead>
                <tr style="font-weight: bold;">
                    <th width="300">Module</th>
                    <th style="text-align: center; ">Valeur</th>
                    <th hidden style="text-align: center; " >Montant</th>
                </tr>
            </thead>
            <tbody>
               <!-- <tr>
                    <td>Nom du pack</td>
                    <td align="center" colspan="2"><input type="text" class="input-sm form-control" width="50"
                            id="pack_name"></td>
                </tr>-->
                <input type="hidden" class="input-sm form-control" width="50"
                            id="pack_name">
                <tr>
                    <td><span id="nbcoll">Nombre de collaborateurs</span></td>
                    <td>
                        <div class="col-md-6" style="line-height: 27px; margin:0;padding:0;">
                            <input type="number" id="nb_collaborateurs_3" class="input-sm form-control"
                                value="<?php echo $query[count($query)-1]->nb_collaborateurs?>" min="<?php echo $query[count($query)-1]->nb_collaborateurs?>" style="width: 100px; text-align: center" onchange="calculsomme();">
                        </div>
                    </td>
                    <input type="hidden" value="<?php echo $query[count($query)-1]->nb_collaborateurs?>" id="nb_collaborateurs_hidden">
                   <input type="hidden" disabled id="montant_collaborateur" class="montant input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_collaborateur?>" >
                </tr>
                <tr>
                    <td><span id="nbcontact">Nombre de contacts</span></td>
                    <td>
                        <div class="col-md-6" style="line-height: 27px; margin:0;padding:0;">
                            <input type="number" id="nb_contacts_rad" class="input-sm form-control"
                                value="<?php echo $query[count($query)-1]->nb_contacts_rad?>" min="<?php echo $query[count($query)-1]->nb_contacts_rad?>" style="width: 100px; text-align: center" onchange="calculsomme();">
                        </div>
                    </td>
                    <input type="hidden" value="<?php echo $query[count($query)-1]->nb_contacts_rad?>" id="nb_contacts_rad_hidden">

                    <input type="hidden" disabled id="montant_contacts" class="montant input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_contacts?>" > 
                </tr>
                <tr>
                    <td><span id="nbfact">Nombre de factures par mois</span></td>
                    <td>
                        
                        <div class="col-md-6" style="line-height: 27px; margin:0;padding:0;">
                            <input type="number"  id="nb_factures_mois_3" class="input-sm form-control"
                                value="<?php echo $query[count($query)-1]->nb_factures_mois?>" min="<?php echo $query[count($query)-1]->nb_factures_mois?>" style="width: 100px; text-align: center" onchange="calculsomme();">
                        </div>
                    </td>
                    <input type="hidden" disabled id="montant_factures_mois" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_factures_mois?>" >
                </tr>
                <input type="hidden" value="<?php echo $query[count($query)-1]->nb_factures_mois?>" id="nb_factures_mois_3_hidden">

                <tr>
                    <td><span id="nbdevis">Nombre de devis par mois</span></td>
                    <td>                               
                        <div class="col-md-4" style="line-height: 27px; margin:0;padding:0;">
                            <input type="number" id="nb_devis_mois_3" class="input-sm form-control"
                                value="<?php echo $query[count($query)-1]->nb_devis_mois?>"  min="<?php echo $query[count($query)-1]->nb_devis_mois?>" style="width: 100px; text-align: center" onchange="calculsomme();">
                        </div>
                    </td>
                    <input type="hidden" value="<?php echo $query[count($query)-1]->nb_devis_mois?>" id="nb_devis_mois_3_hidden">

                     <input type="hidden" disabled id="montant_devis_mois" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_devis_mois ?>" > 
                </tr>
                <?php if($query[count($query)-1]->multi_devises == 1){ ?>
                <tr>
                    <td><span id="nbdocuments"> Documents multi-devises </span></td>
                    <td align="center"><input type="checkbox" value="0" id="multi_devises" class="input-sm form-control"
                    onclick="calculsomme();"></td>
                   <input type="hidden" disabled id="montant_multi_devises" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_multi_devises ?>" > 
                </tr>
                <?php } ?>
                <?php if($query[count($query)-1]->export_lot_pdf == 1){ ?>
                <tr>
                    <td><span id="exportpdf"> Export PDF par lot</span></td>
                    <td align="center"><input type="checkbox" value="0" id="export_lot_pdf" onclick="calculsomme();" class="input-sm form-control"
                            ></td>
                     <input type="hidden" disabled id="montant_export_lot_pdf" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_export_lot_pdf ?>" >         
                </tr>
                <?php } ?>
                <?php if($query[count($query)-1]->multi_societes == 1){ ?>
                <tr style="display: none;">
                    <td><span id="etabplus">Plusieurs Ã©tablissements</span></td>
                    <td align="center"><input type="checkbox" value="0" id="multi_societes" onclick="calculsomme();" class="input-sm form-control"
                            ></td>
                   <input type="hidden" disabled  id="montant_multi_societes" class="input-sm form-control"
                    style="text-align: center; " value="0.000" >           
                </tr>
                <?php } ?>
                <?php if($query[count($query)-1]->export_excel == 1){ ?>
                <tr>
                    <td><span id="expodonn">Export de donnÃ©es (Excel)</span></td>
                    <td align="center"><input type="checkbox" value="0" id="export_excel" onclick="calculsomme();" class="input-sm form-control"
                            ></td>
                     <input type="hidden" disabled  id="montant_export_excel" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_export_excel ?>" >                        
                </tr>
                <?php } ?>
                <?php if($query[count($query)-1]->relance == 1){ ?>
                <tr>
                    <td><span id="txtrelance">Relance automatique </span></td>
                    <td align="center"><input type="checkbox" value="0" onclick="calculsomme();" id="relance" class="input-sm form-control"
                            ></td>
                    <input type="hidden" disabled id="montant_relance" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_relance ?>" >                   
                </tr>
                <?php } ?>
                <?php if($query[count($query)-1]->export_contact == 1){ ?>
                <tr>
                    <td><span id="expocontact">Export contact </span></td>
                    <td align="center"><input type="checkbox" value="0" onclick="calculsomme();" id="export_contact" class="input-sm form-control"
                            ></td>
                             <input type="hidden" disabled id="montant_export_contact" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_export_contact ?>" >               
                </tr>
                <?php } ?>
                <?php if($query[count($query)-1]->gestionstock == 1){ ?>
                <tr>
                    <td><span id="sgstock">Gestion de stock </span> </td>
                    <td align="center" ><input type="checkbox" value="0" onclick="calculsomme();" id="gestionstock" class="input-sm form-control"
                            ></td>                                        
                          
                             <input type="hidden" disabled id="montant_gestionstock" class="input-sm form-control"
                    style="text-align: center; " value="<?php echo $query[count($query)-1]->montant_gestionstock ?>" >         
                </tr>
                <?php } ?>
                <!--<tr>
                    <td>ModÃ©le d'email </td>
                    <td align="center">
                   
                    <select id="packs_id" class="form-control">
                                                                     
                                <option value="0"> </option>
                              <?php  
                       //  for($i=0;$i<count($packs);$i++){            
                         ?>  
                           <option value="<?php //echo($packs[$i]['id_model']) ?>"> <?php //echo($packs[$i]['model_title']) ?> </option>
                         <?php //}?>
                                                </select>-->
                   
              <!--  </tr>-->
            </tbody>

        </table>
      
      
    </div>
    <div class="col-xs-4 col-md-4">
        <table style="width: 100%;">
        <tbody>
        <tr><th style="width: 55%;">
      <span>Abonnement </span>
      </th>
      <td>
      <select name="delai_paiement" onchange="calculsomme();" id="delai_paiement" class="form-control input-sm">
            <option value="1">Mensuel</option>
            <option value="3">Trimestriel</option>
            <option value="6">Semestriel </option>
            <option value="12">Annuel </option>
      </select>                
      </td>
      </tr>
        <tr><th  >Total</th> <td><span id="somme"></span></td></tr>
        <tr> <td colspan="2"><span  id="affichesuccess">
        <div class="alert alert-success" role="alert">
  <h4 class="alert-heading"> </h4>
  <p>Merci d'activÃ© votre compte</p>
  <hr>
  <p class="mb-0"> </p>
</div>
        
        </span></td></tr>
        </tbody>
        </table>
</div>
</div>




</div>
        
        


    
    <!--/row-->

<br> 
<div  style="text-align:center; margin-left:240px;" class="col-xs-4 col-md-4 form-group">
     <input type="email" id="mailclient"  type="text" class="search-query form-control input-sm" placeholder="Saisir votre e-mail">
</div>
 
                </div>
                <div style="margin-left:400px;  margin-top:20px;">
    <a href="/espaceclient/commande" class="btn default">Cancel</a>
    <button class="btn btn-success" onclick="addPackespaceclient()"><i class="fa fa-check"></i> Continuer</button>
</div>
            </div>
        </div>
        <!--/row-->

    </div>
</div>
<!-- END PAGE CONTENT INNER -->

        </div>
    </div>
    <!-- END PAGE CONTENT -->
    
</div>
 
<div class="page-footer">
<div class="container">   
 
Â© Copyright 2020 - Bison ERP

<a href="#"><div class="scroll-to-top" style="display: none;">
        <i class="icon-arrow-up"></i>
    </div></a> 
</div>
</div>
              
 
<div class="scroll-to-top">
    <i class="icon-arrow-up"></i>
</div>
<!-- END FOOTER -->



</body>
<script>
//var num = Number(0.005) // The Number() only visualizes the type and is not needed
//var roundedString = num.toFixed(2);
//var rounded = $('.montant').val(Number(roudedString));
/* $(".montant").keyup(function(){
    // num =  $('#montant_collaborateur').val(); // The Number() only visualizes the type and is not needed
 //   alert( (Number($('#montant_collaborateur').val()).toFixed(3)));
 //roundedString = num.toFixed(3);
$('.montant').val(Number($('#montant_collaborateur').val()).toFixed(3));



   //  $('.montant').val($('.montant').val().toFixed(3));
 });*/
</script>
<script>
$('#affichesuccess').hide();
 calculsomme();
            function calculsomme()
        {
        var total = 0;

        var montant_collaborateur = Number($('#montant_collaborateur').val())*(Number($('#nb_collaborateurs_3').val())-Number($('#nb_collaborateurs_hidden').val()));
      

        var montant_contact = Number($('#nb_contacts_rad').val())*Number($('#montant_contacts').val());
        var montant_factures_mois = (Number($('#nb_factures_mois_3').val())-Number($('#nb_factures_mois_3_hidden').val()))*Number($('#montant_factures_mois').val());
        var montant_devis_mois =(Number($('#nb_devis_mois_3').val())-Number($('#nb_devis_mois_3_hidden').val()))*Number($('#montant_devis_mois').val());

        var montant_export_excel = Number($('#montant_export_excel').val());
        var montant_relance = Number($('#montant_relance').val());
        var montant_export_contact = Number($('#montant_export_contact').val());
        var montant_gestionstock = Number($('#montant_gestionstock').val());
        var montant_multi_devises = Number($('#montant_multi_devises').val());
      
        var montant_export_lot_pdf = Number($('#montant_export_lot_pdf').val());
     if($('#multi_devises').prop("checked") == true){
        $('#multi_devises').val(1);
        total += montant_multi_devises;
     }else{
        $('#multi_devises').val(0);
     }

     if($('#export_lot_pdf').prop("checked") == true){
        $('#export_lot_pdf').val(1);
        total += montant_export_lot_pdf;
     }else{
        $('#export_lot_pdf').val(0);
     }

     if($('#export_excel').prop("checked") == true){
        $('#export_excel').val(1);
        total += montant_export_excel;
     }else{
        $('#export_excel').val(0);
     }

     if($('#relance').prop("checked") == true){
        total += montant_relance;
        $('#relance').val(1);
     }else{
        $('#relance').val(0);
     }

     if($('#export_contact').prop("checked") == true){
        total += montant_export_contact;
        $('#export_contact').val(1);
     }else{
        $('#export_contact').val(0);
     }

     if($('#gestionstock').prop("checked") == true){
        total += montant_gestionstock;
        $('#gestionstock').val(1);
     }else{
        $('#gestionstock').val(0);
     }
     total += montant_collaborateur  + montant_contact + montant_factures_mois + montant_devis_mois;
     //console.log(total);
     $("#somme").html((total*($('#delai_paiement').val())).toFixed(3));
    }
    function addPackespaceclient() {
        if($('#mailclient').val() && isValidEmailAddress($('#mailclient').val()) ){
        $.ajax({
        url : '/espaceclient/sendmailcontact',
        type : 'post',
        data : { 
            "nb_collaborateurs_3": $('#nb_collaborateurs_3').val(),
            "nb_contacts_rad": $('#nb_contacts_rad').val(),
            "nb_factures_mois_3": $('#nb_factures_mois_3').val(),
            "nb_devis_mois_3": $('#nb_devis_mois_3').val(),
            "multi_devises": $('#multi_devises').val(),
            "export_lot_pdf": $('#export_lot_pdf').val(),
            "export_excel": $('#export_excel').val(),
            "relance": $('#relance').val(),
            "gestionstock": $('#gestionstock').val(),
            "sgstock": $('#sgstock').html(),
            "nbcoll": $('#nbcoll').html(),
            "nbcontact": $('#nbcontact').html(),
            "nbfact": $('#nbfact').html(),
            "nbdevis": $('#nbdevis').html(),
            "nbdocuments": $('#nbdocuments').html(),
            "exportpdf": $('#exportpdf').html(),
            "etabplus": $('#etabplus').html(),
            "expodonn": $('#expodonn').html(),
            "txtrelance": $('#txtrelance').html(),
            "expocontact": $('#expocontact').html(),
            "mail": $('#mailclient').val(),
            "delaisexpiration": $('#delai_paiement').val(),
            "periode_abonnement":$('#delai_paiement').children("option:selected").html(),
        
        },
            success: function(data) {
              if(data==1){                
                    $('#affichesuccess').show();    
              }                           
        },
  
    })}else{
        alert('Merci de renseigner votre email')
    }}
  /* function addPackespaceclient() {
       
        if($('#mailclient').val() && isValidEmailAddress($('#mailclient').val()) ){
        $.ajax({
        url : '/espaceclient/detailcommande',
        type : 'post',
        data : {
            "nb_collaborateurs_3": $('#nb_collaborateurs_3').val(),
            "nb_contacts_rad": $('#nb_contacts_rad').val(),
            "nb_factures_mois_3": $('#nb_factures_mois_3').val(),
            "nb_devis_mois_3": $('#nb_devis_mois_3').val(),
            "multi_devises": $('#multi_devises').val(),
            "export_lot_pdf": $('#export_lot_pdf').val(),
            "export_excel": $('#export_excel').val(),
            "relance": $('#relance').val(),
            "gestionstock": $('#gestionstock').val(),
            "sgstock": $('#sgstock').html(),
            "nbcoll": $('#nbcoll').html(),
            "nbcontact": $('#nbcontact').html(),
            "nbfact": $('#nbfact').html(),
            "nbdevis": $('#nbdevis').html(),
            "nbdocuments": $('#nbdocuments').html(),
            "exportpdf": $('#exportpdf').html(),
            "etabplus": $('#etabplus').html(),
            "expodonn": $('#expodonn').html(),
            "txtrelance": $('#txtrelance').html(),
            "expocontact": $('#expocontact').html(),
            "mail": $('#mailclient').val(),
        },
        
         
        success: function(data) { 
            $('#affichesuccess').show();
          //  alert('1');     
          // Simulate a mouse click:
// window.location.href = "/espaceclient/detailcommande";
         
           /* if(data == 0)
            {
                alert("erreur");
            }
            else
            {
            $('#annuler').hide();
            }*/
             
        //},
       /* error: function(error){
          //  console.log(error);
        }
    });
    }else{
        alert('Merci de renseigner votre email');
    }}
  */
    function isValidEmailAddress(emailAddress) {
        var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);
        return pattern.test(emailAddress);
    }          


</script>


